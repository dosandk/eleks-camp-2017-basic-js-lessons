<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>JS Constructions</title>
</head>

<body>
    <script>
        // 1. ImmutableArray        
        let initArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        let ImmutableArray = {
            push(arr, el) {
                return [].concat(arr.slice(), el);
            },
            pop(arr) {
                let arrCopy = arr.slice()
                arrCopy.length = arr.length - 1;
                return arrCopy;
            },
            shift(arr) {
                return arr.slice(1);
            },
            unshift(arr, el) {
                let arrCopy = [];
                arrCopy[0] = el;
                return arrCopy.concat(arr.slice(1));
            },
            remove(arr, index) {
                return arr.slice(0, index).concat(arr.slice(index + 1))
            },
            insert(arr, el, index) {
                return arr.slice(0, index).concat(el, arr.slice(index))
            },
            swapElements(arr, direction, index) {
                function ckeckSwapDirection(curInd, prevInd, nextInd, curElem, prevElem, nextElem) {
                    if (direction == 'prev') {
                        arrayCopy[curInd] = prevElem;
                        arrayCopy[prevInd] = curElem;
                    } else if (direction == 'next') {
                        arrayCopy[curInd] = nextElem;
                        arrayCopy[nextInd] = curElem;
                    }
                }

                let arrayCopy = arr.slice(),
                    amountOfElems = arr.length,
                    currentEl,
                    prevEl,
                    nextEl;

                if (index > amountOfElems - 1) {
                    index = amountOfElems - 1;
                    currentEl = arr[index];
                    prevEl = arr[index - 1];
                    nextEl = arr[0];
                    ckeckSwapDirection(index, index - 1, 0, currentEl, prevEl, nextEl)
                } else if (index <= 0) {
                    index = 0;
                    currentEl = arr[index];
                    prevEl = arr[amountOfElems - 1];
                    nextEl = arr[index + 1];
                    ckeckSwapDirection(index, amountOfElems - 1, index + 1, currentEl, prevEl, nextEl)
                } else {
                    currentEl = arr[index];
                    prevEl = arr[index - 1];
                    nextEl = arr[index + 1];
                    ckeckSwapDirection(index, index - 1, index + 1, currentEl, prevEl, nextEl)
                }
                return arrayCopy;
            },
            swapWithPrevious(arr, index) {
                return this.swapElements(arr, 'prev', index);
            },
            swapWithNext(arr, index) {
                return this.swapElements(arr, 'next', index);
            },

        }
        // console.log('1. ImmutableArray')
        // console.log('push', ImmutableArray.push(initArray, 55))
        // console.log('pop', ImmutableArray.pop(initArray))
        // console.log('shift', ImmutableArray.shift(initArray))
        // console.log('unshift', ImmutableArray.unshift(initArray, 10))
        // console.log('remove', ImmutableArray.remove(initArray, 1))
        // console.log('insert', ImmutableArray.insert(initArray, 100, 1))
        // console.log('swapWithPrevious', ImmutableArray.swapWithPrevious(initArray, 10))
        // console.log('swapWithNext', ImmutableArray.swapWithNext(initArray, 10))
        // console.log('initArray', initArray)

        // 2. intersection(arr1, arr2)
        function intersection(arr1, arr2) {
            let resultArr = [];
            arr1.forEach(function (elem1) {
                arr2.forEach(function (elem2) {
                    if (elem1 == elem2 && resultArr.indexOf(elem1) == -1) {
                        resultArr.push(elem1);
                    }
                })
            })
            return resultArr.sort(function (a, b) { return a - b });
        }
        // console.log('2. intersection(arr1, arr2)')
        // console.log('intersection', intersection([2, 1, 3, 1], [1, 3, 5]))

        // 4. toEvenOddString([1, 3, 2, 8, 13, 7, 4])
        function toEvenOddString(arr) {
            let evenArr = [],
                oddArr = [];
            arr.forEach(function (elem) {
                if (elem % 2) {
                    oddArr.push(elem)
                } else {
                    evenArr.push(elem)
                }
            })
            return evenArr.sort(function (a, b) { return a - b }).join('') + oddArr.sort(function (a, b) { return b - a }).join('');
        }
        // console.log('4. toEvenOddString([1, 3, 2, 8, 13, 7, 4])')
        // console.log('result', toEvenOddString([1, 3, 2, 8, 13, 7, 4]))
    </script>
</body>

</html>